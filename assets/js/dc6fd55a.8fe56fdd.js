(self.webpackChunktu_cis_4398_docs_template=self.webpackChunktu_cis_4398_docs_template||[]).push([[8576],{60713:function(e,t,n){"use strict";n.r(t),n.d(t,{assets:function(){return h},contentTitle:function(){return c},default:function(){return p},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return u}});var a=n(83117),r=n(80102),s=(n(67294),n(3905)),i=n(93456),o=["components"],l={sidebar_position:1},c="Design",d={unversionedId:"system-architecture/design",id:"system-architecture/design",title:"Design",description:"Class Diagrams",source:"@site/docs/system-architecture/design.mdx",sourceDirName:"system-architecture",slug:"/system-architecture/design",permalink:"/project-patreon-shout/docs/system-architecture/design",draft:!1,editUrl:"https://github.com/Capstone-Projects-2022-Fall/project-patreon-shout/edit/main/documentation/docs/system-architecture/design.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"System Architecture",permalink:"/project-patreon-shout/docs/category/system-architecture"},next:{title:"Sequence Diagrams",permalink:"/project-patreon-shout/docs/system-architecture/sequence-diagrams"}},h={},u=[{value:"Class Diagrams",id:"class-diagrams",level:2},{value:"Gateway",id:"gateway",level:3},{value:"Patreon Post Parser",id:"patreon-post-parser",level:3},{value:"Database Diagram",id:"database-diagram",level:2}],g={toc:u};function p(e){var t=e.components,n=(0,r.Z)(e,o);return(0,s.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"design"},"Design"),(0,s.kt)("h2",{id:"class-diagrams"},"Class Diagrams"),(0,s.kt)("h3",{id:"gateway"},"Gateway"),(0,s.kt)(i.Mermaid,{config:{},chart:"classDiagram\n\n    class PostBean{\n        #int post_id\n        #String publishdate\n        #String title\n        #String url\n        #String content\n        #boolean isprivate\n        #String creator\n        +getPost_id() int\n        +setPost_id(int)\n        +getPublishdate() String\n        +setPublishdate(String)\n        +getTitle() String\n        +setTitle(String)\n        +getUrl() String\n        +setUrl(String)\n        +getContent() String\n        +setContent(String)\n        +isIsprivate() boolean\n        +setIsprivate(boolean)\n        +getCreator() String\n        +setCreator(String)\n        +toString() String\n    }\n    class JPAConfiguration{\n        +String dsUrl\n        +String dsUsername\n        +String dsPassword\n        +dataSource() DataSource\n        +jpaTransactionManager() JpaTransactionManager\n        -vendorAdapter() HibernateJpaVendorAdapter\n        -jpaHibernateProperties() Properties\n    }\n    class PSConfiguration{\n        +String clientId\n        +String clientSecret\n        +String redirectUri\n        +oauthClient() PatreonOAuth\n    }\n    class Posts{\n        +getPost(String) PostBean\n        +getAllPosts() List<PostBean>\n        +putPost(PostBean)\n        +updatePost(PostBean)\n        +removePost(String)\n    }\n    class PostsRepository{\n        -EntityManager em\n        +getPost(String) PostBean\n        +getAllPosts() List<PostBean>\n        +putPost(PostBean)\n        +updatePost(PostBean)\n        +removePost(String)\n    }\n    class DiscordSender{\n        -WebhookClient client\n        -WebhookEmbedBuilder embed\n        +DiscordSender(String)\n        +send()\n        +setColor(int)\n        +setTitle(String)\n        +setDescription(String)\n        +addField(String, String)\n        +setImage(String)\n        +close()\n    }\n    class User{\n        +Data data\n        +Links links\n    }\n    class Data{\n        +float id\n        +String type\n        +Attributes Attributes\n    }\n    class Attributes{\n        +String about\n        +Boolean can_see_nsfw\n        +String created\n        +String email\n        +String first_name\n        +String full_name\n        +Boolean hide_pledges\n        +String image_url\n        +Boolean is_email_verified\n        +String last_name\n        +Integer like_count\n        +Object social_connections\n        +String thumb_url\n        +String url\n        +String vanity\n    }\n    class Links{\n        +String self\n    }\n    class EndpointWrapper{\n        -String baseUrl\n        +fetchUser(String) User\n        +socialSender(WebhookURL) Boolean\n    }\n    class OAuth{\n        -PatreonOAuth oauthClient\n        +WebhookReceiver(String, String) String\n    }\n    class PSApplication{\n        +main(String[])\n    }\n    User<|--Data\n    User<|--Links\n    Data<|--Attributes\n    PSApplication<|--JPAConfiguration\n    PSApplication<|--PSConfiguration\n    PSConfiguration<|--OAuth\n    JPAConfiguration<|--PostsRepository\n    PostsRepository<|--Posts\n    PostBean<|--Posts\n    Posts<|--DiscordSender\n    EndpointWrapper<|--DiscordSender\n    PSApplication<|--EndpointWrapper\n    EndpointWrapper<|--User",mdxType:"Mermaid"}),(0,s.kt)("p",null,"The gateway allows Patreon Shout to serve information from the database to the client. Everything begins in PSApplication, where Spring is first run. From here JPA is configured, which assists in handling storage and service of posts. PSConfiguration let's us handle OAuth requests using Client ID, Client secret, and a redirect URL. Spring handles a lot if it's data using endpoints. With EndpointWrapper we are able to send posts to platforms such as Discord, and recieve posts which can be broken down into smaller attributes to be served when requested."),(0,s.kt)("h3",{id:"patreon-post-parser"},"Patreon Post Parser"),(0,s.kt)(i.Mermaid,{chart:"classDiagram\n    Patreon --|> WebhookReceiver\n    Patreon --|> Selenium\n    Selenium <|--|> MainLoop\n    WebhookReceiver --|> Database\n    Database <|--|> MainLoop\n\n\n    class Selenium {\n        +WebDriver driver\n\n        +run()\n        +createBrowser()\n        +getLinks()\n        +handlePost(String)\n        +savePost()\n        +goToPatreonPage(String)\n        +geeTest()\n        -boolean visibleElementFound(By)\n        -sleep(int)\n        -int randNum(int, int)\n    }\n\n    class WebhookReceiver {\n        +newPost()\n        +updatePost()\n        -save()\n    }",mdxType:"Mermaid"}),(0,s.kt)("p",null,"The post parser has two separate ways of getting posts from Patreon, with the first being from the Patreon API and the second being through webscraping. The reason behind webscraping is because the Patreon API only allows retrieving posts from creators we currently have an access token for. We get the information through the Patreon API by providing endpoints that will be triggered when specified creators create or update posts. These triggers will notify us to send that creator's post data to our database, and in turn, eventually be sent elsewhere. On the other hand, when we don\u2019t have explicit permission from a content creator, we have a selenium-based web scraping application that will be searching every patreon creator we want for new posts periodically. When it finds a new post, the post data will subsequently be sent to our database to be sent elsewhere."),(0,s.kt)("h2",{id:"database-diagram"},"Database Diagram"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1430409/192663645-08b54558-2b43-4b07-8a49-9bb849bf02c0.png",alt:"Database Diagram drawio"})),(0,s.kt)("p",null,"The database mostly focuses on the profile table, with it only having 1 instance per the multiple instances of objects in the posts. The profile table holds the main information about a user of Patreon Shout, such as their username, and who they follow. The profile table has a direct 1-to-1 relationship with the patreon_info table, which holds the user creator information that we may use to get the posts. If the user is not a creator, we will have an instance of an object relating to the profile so we could see if they are registered as a creator or as a user with Patreon Shout. Furthermore, the lists hold all the information needed for the user to create lists of creators that would overlap their main feed. This includes the name of the list, the creator that they added to the list, and the user that created the list. Finally, we have the posts table that holds the information of the post that we store to publish on different social media, or to publish it into our website. It will have the creator of the post, as well as all the information contained in the post itself such as the title, and the published date for us to show others."))}p.isMDXComponent=!0},11748:function(e,t,n){var a={"./locale":89234,"./locale.js":89234};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=11748}}]);